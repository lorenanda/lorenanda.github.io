<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="ahrefs-site-verification" content="a93710dfb78b4003a90dbc831e6a339e0e4e6b6d5593721f0b473b85966e116f">
  

  

  <title>Building a dockerized ETL pipeline for tweet streaming in Slack</title>

  
  <meta name="author" content="Lorena Ciutacu">
  

  <meta name="description" content="Learn how I built an ETL pipeline for sentiment analysis and database storage with Python.">

  

  
  <meta name="keywords" content="technical writer, data scientist, women in data, berlin startup">
  

  <link rel="alternate" type="application/rss+xml" title="Lorena Ciutacu" href="http://localhost:4000/feed.xml">

  

  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="Lorena Ciutacu">
  <meta property="og:title" content="Building a dockerized ETL pipeline for tweet streaming in Slack">
  <meta property="og:description" content="Learn how I built an ETL pipeline for sentiment analysis and database storage with Python.">

  

  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Lorena Ciutacu">
  <meta property="og:article:published_time" content="2020-11-14T09:30:00+01:00">
  <meta property="og:url" content="http://localhost:4000/bootcamp7/">
  <link rel="canonical" href="http://localhost:4000/bootcamp7/">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@">
  <meta name="twitter:creator" content="@">

  <meta property="twitter:title" content="Building a dockerized ETL pipeline for tweet streaming in Slack">
  <meta property="twitter:description" content="Learn how I built an ETL pipeline for sentiment analysis and database storage with Python.">

  

  


  

  

  
</head>


<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="http://localhost:4000/">Lorena Ciutacu</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    [...]
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/blog">Blog</a>
          </li>
        <li class="nav-item">
          <a class="nav-link" id="nav-search-link" href="#" title="Search">
            <span id="nav-search-icon" class="fa fa-search"></span>
            <span id="nav-search-text">Search</span>
          </a>
        </li></ul>
  </div>

  

  

</nav>




<div id="beautifuljekyll-search-overlay">

  <div id="nav-search-exit" title="Exit search">✕</div>
  <input type="text" id="nav-search-input" placeholder="search">
  <ul id="search-results-container"></ul>
  
  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  <script>
    var searchjson = '[ \
       \
        { \
          "title"    : "How to use math equations in Docusaurus", \
          "category" : "docusaurusjekyllmarkdowntutorials", \
          "url"      : "/mathjax-katex/", \
          "date"     : "July 10, 2022" \
        }, \
       \
        { \
          "title"    : "How to connect Google Sheets with MySQL", \
          "category" : "automationn8ntutorials", \
          "url"      : "/connect-mysql-sheets/", \
          "date"     : "July  7, 2022" \
        }, \
       \
        { \
          "title"    : "How to automatically import JSON into Google Sheets", \
          "category" : "automationn8ntutorials", \
          "url"      : "/import-json-spreadsheet/", \
          "date"     : "June 30, 2022" \
        }, \
       \
        { \
          "title"    : "How to automate database activity monitoring and alerting", \
          "category" : "automationn8ntutorials", \
          "url"      : "/database-activity-monitoring/", \
          "date"     : "June 28, 2022" \
        }, \
       \
        { \
          "title"    : "Resources for technical writers", \
          "category" : "booksnonfictionwriting", \
          "url"      : "/resources-technical-writers/", \
          "date"     : "June 26, 2022" \
        }, \
       \
        { \
          "title"    : "How to scrape data from a website with n8n", \
          "category" : "automationn8ntutorials", \
          "url"      : "/webscraping-workflow/", \
          "date"     : "June 21, 2022" \
        }, \
       \
        { \
          "title"    : "Webhooks explained", \
          "category" : "automationn8n", \
          "url"      : "/webhooks-explained/", \
          "date"     : "June 14, 2022" \
        }, \
       \
        { \
          "title"    : "Portugiesisches Gift von Luis Sellano", \
          "category" : "booksfictiondeutschbloggerportal", \
          "url"      : "/buchrezension-portugiesisches-gift/", \
          "date"     : "May 26, 2022" \
        }, \
       \
        { \
          "title"    : "Nachts im Internet von Stephen Law", \
          "category" : "booksnonfictiondeutschbloggerportal", \
          "url"      : "/nachts-im-internet/", \
          "date"     : "May 15, 2022" \
        }, \
       \
        { \
          "title"    : "Der Hauptmann und der Mörder von Zhou Haohui", \
          "category" : "booksfictiondeutschbloggerportal", \
          "url"      : "/buchrezension-184-hauptmann-und-moerder/", \
          "date"     : "April 16, 2022" \
        }, \
       \
        { \
          "title"    : "13 tools to use for DevSecOps automation", \
          "category" : "n8ntutorials", \
          "url"      : "/devsecops-tools/", \
          "date"     : "March 11, 2022" \
        }, \
       \
        { \
          "title"    : "Chatter von Ethan Kross", \
          "category" : "booksnonfictiondeutschbloggerportal", \
          "url"      : "/buchrezension-chatter/", \
          "date"     : "February 21, 2022" \
        }, \
       \
        { \
          "title"    : "My Visual Studio Code setup for technical writing", \
          "category" : "writing", \
          "url"      : "/vscode-setup-for-technical-writing", \
          "date"     : "February 11, 2022" \
        }, \
       \
        { \
          "title"    : "How to automate every step of an incident response workflow", \
          "category" : "automationn8ntutorials", \
          "url"      : "/automated-incident-response/", \
          "date"     : "February 10, 2022" \
        }, \
       \
        { \
          "title"    : "Im Auftrag der Toten von Axel Petermann", \
          "category" : "booksnonfictiondeutschbloggerportal", \
          "url"      : "/buchrezension-im-auftrag-der-toten/", \
          "date"     : "January 29, 2022" \
        }, \
       \
        { \
          "title"    : "How hyperautomation will transform business operations", \
          "category" : "automationn8n", \
          "url"      : "/hyperautomation-trends/", \
          "date"     : "January 27, 2022" \
        }, \
       \
        { \
          "title"    : "Rituale von Christine Dohler", \
          "category" : "booksnonfictiondeutschbloggerportal", \
          "url"      : "/buchrezension-rituale/", \
          "date"     : "January 22, 2022" \
        }, \
       \
        { \
          "title"    : "7 no-code workflow automations for Amazon Web Services", \
          "category" : "automationn8n", \
          "url"      : "/aws-workflows/", \
          "date"     : "January 18, 2022" \
        }, \
       \
        { \
          "title"    : "How to write in accessible language", \
          "category" : "writing", \
          "url"      : "/accessible-language/", \
          "date"     : "January 15, 2022" \
        }, \
       \
        { \
          "title"    : "How to synchronize data between two systems (one-way vs. two-way sync)", \
          "category" : "automationn8ntutorials", \
          "url"      : "/data-sync-workflows/", \
          "date"     : "November 18, 2021" \
        }, \
       \
        { \
          "title"    : "5 ways to keep your skills fresh after finishing a coding bootcamp", \
          "category" : "data science", \
          "url"      : "/keep-your-skills-fresh-after-coding-bootcamp/", \
          "date"     : "November 14, 2021" \
        }, \
       \
        { \
          "title"    : "October books wrap-up", \
          "category" : "booksnonfictionreviews", \
          "url"      : "/october-books/", \
          "date"     : "October 31, 2021" \
        }, \
       \
        { \
          "title"    : "Market basket analysis with the Apriori algorithm in Python", \
          "category" : "algorithmsdata sciencepythontutorials", \
          "url"      : "/market-basket-analysis-with-apriori-algorithm/", \
          "date"     : "October 17, 2021" \
        }, \
       \
        { \
          "title"    : "Making product recommendations using Spectral Biclustering in Python", \
          "category" : "algorithmsdata sciencepythontutorials", \
          "url"      : "/spectral-biclustering-for-marketing-in-python/", \
          "date"     : "October  3, 2021" \
        }, \
       \
        { \
          "title"    : "September books wrap-up", \
          "category" : "booksnonfictionfiction", \
          "url"      : "/september-books/", \
          "date"     : "September 30, 2021" \
        }, \
       \
        { \
          "title"    : "6 features of tasks that can be automated", \
          "category" : "automationn8n", \
          "url"      : "/automatable-tasks/", \
          "date"     : "September 28, 2021" \
        }, \
       \
        { \
          "title"    : "Create a toxic language detector for Telegram in 4 steps", \
          "category" : "automationn8ntutorials", \
          "url"      : "/toxic-language-workflow/", \
          "date"     : "September 21, 2021" \
        }, \
       \
        { \
          "title"    : "How to get started with CRM automation (with 3 no-code workflow ideas)", \
          "category" : "automationn8ntutorials", \
          "url"      : "/crm-workflows/", \
          "date"     : "September 14, 2021" \
        }, \
       \
        { \
          "title"    : "6 e-commerce workflows to power up your Shopify store", \
          "category" : "automationn8ntutorials", \
          "url"      : "/ecommerce-workflows/", \
          "date"     : "September  2, 2021" \
        }, \
       \
        { \
          "title"    : "August books wrap-up", \
          "category" : "booksfictionreviews", \
          "url"      : "/august-books/", \
          "date"     : "August 31, 2021" \
        }, \
       \
        { \
          "title"    : "Photography in the instant gratification economy", \
          "category" : "photography", \
          "url"      : "/photography-and-instant-gratification-economy/", \
          "date"     : "August 19, 2021" \
        }, \
       \
        { \
          "title"    : "Framing loneliness in the film &quot;O Homem das Multidões&quot;", \
          "category" : "film", \
          "url"      : "/o-homem-das-multidoes-film-analysis/", \
          "date"     : "August 11, 2021" \
        }, \
       \
        { \
          "title"    : "Gefährliche Mittsommernacht von Christoffer Holst", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-gefaehrliche-mittsommernacht/", \
          "date"     : "August  8, 2021" \
        }, \
       \
        { \
          "title"    : "Clustering and classification of Romanian psych-verbs", \
          "category" : "data sciencelinguistics", \
          "url"      : "/romanian-psych-verbs-study/", \
          "date"     : "August  6, 2021" \
        }, \
       \
        { \
          "title"    : "July books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/july-books/", \
          "date"     : "July 31, 2021" \
        }, \
       \
        { \
          "title"    : "Auf Erden sind wir kurz grandios von Ocean Vuong", \
          "category" : "booksnonfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-auf-erden-sind-wir-kurz-grandios/", \
          "date"     : "July 11, 2021" \
        }, \
       \
        { \
          "title"    : "June books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/june-books/", \
          "date"     : "June 30, 2021" \
        }, \
       \
        { \
          "title"    : "Der Weg des Siegers von Ronny Schönig", \
          "category" : "booksnonfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-der-weg-des-siegers/", \
          "date"     : "June 20, 2021" \
        }, \
       \
        { \
          "title"    : "5 tasks you can automate with the new Notion API", \
          "category" : "automationn8ntutorials", \
          "url"      : "/notion-workflows/", \
          "date"     : "June  8, 2021" \
        }, \
       \
        { \
          "title"    : "May books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/may-books/", \
          "date"     : "May 31, 2021" \
        }, \
       \
        { \
          "title"    : "Roboterland von Jenny Kleeman", \
          "category" : "booksnonfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-roboterland/", \
          "date"     : "May 23, 2021" \
        }, \
       \
        { \
          "title"    : "Achtsam morden am Rande der Welt von Karsten Dusse", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-achtsam-morden/", \
          "date"     : "May 16, 2021" \
        }, \
       \
        { \
          "title"    : "15 Google apps you can combine and automate to increase productivity", \
          "category" : "automationn8ntutorials", \
          "url"      : "/google-apps-workflows/", \
          "date"     : "May 12, 2021" \
        }, \
       \
        { \
          "title"    : "Die Tote im Kaffeehaus von Beate Maxian", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-die-tote-im-kaffeehaus/", \
          "date"     : "May  9, 2021" \
        }, \
       \
        { \
          "title"    : "Automate your data processing pipeline in 9 steps", \
          "category" : "automationn8ntutorials", \
          "url"      : "/etl-pipeline-workflow/", \
          "date"     : "May  4, 2021" \
        }, \
       \
        { \
          "title"    : "Trauma von Angélique Mundt", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-trauma/", \
          "date"     : "May  2, 2021" \
        }, \
       \
        { \
          "title"    : "April books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/april-books/", \
          "date"     : "April 30, 2021" \
        }, \
       \
        { \
          "title"    : "6 findings from analysing the Oscars speeches of the best directors", \
          "category" : "data sciencepython", \
          "url"      : "/oscars-speech-analysis-with-python/", \
          "date"     : "April 25, 2021" \
        }, \
       \
        { \
          "title"    : "5 workflow automations for Mattermost that we love at n8n", \
          "category" : "automationn8n", \
          "url"      : "/mattermost-workflows/", \
          "date"     : "April  9, 2021" \
        }, \
       \
        { \
          "title"    : "Klima von David Klass", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-klima/", \
          "date"     : "April  7, 2021" \
        }, \
       \
        { \
          "title"    : "March books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/march-books/", \
          "date"     : "March 31, 2021" \
        }, \
       \
        { \
          "title"    : "Die Zukunft ist smart von Holger Volland", \
          "category" : "booksnonfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-die-zukunft-ist-smart/", \
          "date"     : "March 28, 2021" \
        }, \
       \
        { \
          "title"    : "How to automate your reading habit just in time for World Poetry Day", \
          "category" : "automationn8ntutorials", \
          "url"      : "/poetry-workflow/", \
          "date"     : "March 21, 2021" \
        }, \
       \
        { \
          "title"    : "Designing Bots by Amir Shevat", \
          "category" : "booksnonfictionreviews", \
          "url"      : "/book-review-designing-bots/", \
          "date"     : "March 14, 2021" \
        }, \
       \
        { \
          "title"    : "Elmet von Fiona Mozley", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-elmet/", \
          "date"     : "March  7, 2021" \
        }, \
       \
        { \
          "title"    : "Terror von Bernd Schmidt", \
          "category" : "booksnonfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-terror/", \
          "date"     : "March  3, 2021" \
        }, \
       \
        { \
          "title"    : "February books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/february-books/", \
          "date"     : "February 28, 2021" \
        }, \
       \
        { \
          "title"    : "Exploring endangered languages with pandas", \
          "category" : "data sciencelinguisticspythontutorials", \
          "url"      : "/endangered-languages/", \
          "date"     : "February 27, 2021" \
        }, \
       \
        { \
          "title"    : "99 Nächte in Logar von Jamil Jan Kochai", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-99naechte/", \
          "date"     : "February 24, 2021" \
        }, \
       \
        { \
          "title"    : "L&#39;importance de protéger les langues en danger", \
          "category" : "francaislinguistics", \
          "url"      : "/langues-en-danger/", \
          "date"     : "February 21, 2021" \
        }, \
       \
        { \
          "title"    : "Die Mauern von Porto von Mario Lima", \
          "category" : "booksfictiondeutschreviewsbloggerportal", \
          "url"      : "/buchrezension-diemauernvonporto/", \
          "date"     : "February 12, 2021" \
        }, \
       \
        { \
          "title"    : "January books wrap-up", \
          "category" : "booksfictionnonfictionreviews", \
          "url"      : "/january-books/", \
          "date"     : "January 31, 2021" \
        }, \
       \
        { \
          "title"    : "January&#39;s regression challenge for Kaggle playground", \
          "category" : "data sciencepythontutorials", \
          "url"      : "/kaggle-playground-jan/", \
          "date"     : "January 21, 2021" \
        }, \
       \
        { \
          "title"    : "12 tech books to read in 2021", \
          "category" : "booksnonfiction", \
          "url"      : "/tech-books-to-read-in-2021/", \
          "date"     : "January  9, 2021" \
        }, \
       \
        { \
          "title"    : "My year in code - 2020 review", \
          "category" : "data science", \
          "url"      : "/my-year-in-code/", \
          "date"     : "December 29, 2020" \
        }, \
       \
        { \
          "title"    : "Detecting emotions from speech with neural networks", \
          "category" : "bootcampdata sciencepython", \
          "url"      : "/bootcamp12/", \
          "date"     : "December 20, 2020" \
        }, \
       \
        { \
          "title"    : "Best practices for software engineering", \
          "category" : "data sciencebootcamp", \
          "url"      : "/bootcamp11/", \
          "date"     : "December 12, 2020" \
        }, \
       \
        { \
          "title"    : "Creating a movie recommender system with Python and Flask", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp10/", \
          "date"     : "December  5, 2020" \
        }, \
       \
        { \
          "title"    : "Classifying clothes images with neural networks", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp9/", \
          "date"     : "November 28, 2020" \
        }, \
       \
        { \
          "title"    : "Creating a Markov chain Monte Carlo simulation in Python", \
          "category" : "algorithmsdata sciencebootcamppython", \
          "url"      : "/bootcamp8/", \
          "date"     : "November 21, 2020" \
        }, \
       \
        { \
          "title"    : "Building a dockerized ETL pipeline for tweet streaming in Slack", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp7/", \
          "date"     : "November 14, 2020" \
        }, \
       \
        { \
          "title"    : "Creating a Metabase dashboard on Postgres and AWS", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp6/", \
          "date"     : "November  7, 2020" \
        }, \
       \
        { \
          "title"    : "Forecasting the weather in Berlin with ARIMA models", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp5/", \
          "date"     : "October 31, 2020" \
        }, \
       \
        { \
          "title"    : "Building a lyrics scraper and classifier in Python", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp4/", \
          "date"     : "October 24, 2020" \
        }, \
       \
        { \
          "title"    : "Predicting bike share demand with linear regression", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp3/", \
          "date"     : "October 17, 2020" \
        }, \
       \
        { \
          "title"    : "Predicting Titanic survivors with decision tree classifiers", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp2/", \
          "date"     : "October 10, 2020" \
        }, \
       \
        { \
          "title"    : "Creating animated scatterplots with Python", \
          "category" : "data sciencebootcamppython", \
          "url"      : "/bootcamp1/", \
          "date"     : "October  3, 2020" \
        }, \
       \
        { \
          "title"    : "5 eye-opening books about AI ethics", \
          "category" : "booksnonfiction", \
          "url"      : "/books-ethics-ai/", \
          "date"     : "August 19, 2020" \
        }, \
       \
        { \
          "title"    : "Women in Data Symposium - Skills to Last a Decade", \
          "category" : "data scienceconferences", \
          "url"      : "/womenindata-symposium/", \
          "date"     : "July 31, 2020" \
        }, \
       \
        { \
          "title"    : "4 tips for creating a great data science portfolio", \
          "category" : "data science", \
          "url"      : "/tips-for-datascience-portfolio/", \
          "date"     : "July 29, 2020" \
        }, \
       \
        { \
          "title"    : "Die geheimen Muster der Sprache von Rottler/Martin", \
          "category" : "bookslinguisticsdeutschreviews", \
          "url"      : "/buchrezension-geheimen-muster-sprache/", \
          "date"     : "June 27, 2020" \
        }, \
       \
        { \
          "title"    : "Invisible Women by Caroline Criado Perez", \
          "category" : "booksdata sciencereviews", \
          "url"      : "/book-review-invisible-women/", \
          "date"     : "June 10, 2020" \
        }, \
       \
        { \
          "title"    : "The Pitfalls of Deep Learning (WAD talk)", \
          "category" : "data scienceconferences", \
          "url"      : "/wad-pitfalls-deeplearning/", \
          "date"     : "May 26, 2020" \
        }, \
       \
        { \
          "title"    : "Diversity in IT Jobs (WAD talk)", \
          "category" : "data scienceconferences", \
          "url"      : "/wad-diversity-it/", \
          "date"     : "May 25, 2020" \
        }, \
       \
        { \
          "title"    : "10 data science books to read during lockdown", \
          "category" : "data sciencebooksnonfiction", \
          "url"      : "/datascience-books-for-lockdown/", \
          "date"     : "May  5, 2020" \
        }, \
       \
        { \
          "title"    : "Der Stand der Bibliotheken in Deutschland", \
          "category" : "data sciencedeutsch", \
          "url"      : "/weltbuchtag/", \
          "date"     : "April 23, 2020" \
        }, \
       \
        { \
          "title"    : "Goodreads Reading Challenge 2019", \
          "category" : "data sciencebooks", \
          "url"      : "/goodreads-reading-challenge/", \
          "date"     : "December 30, 2019" \
        }, \
       \
        { \
          "title"    : "Exhibition of Art of Akume", \
          "category" : "", \
          "url"      : "/art-of-akume-exhibition/", \
          "date"     : "March 31, 2019" \
        }, \
       \
        { \
          "title"    : "Web-scraping IMDb with R", \
          "category" : "data scienceRtutorials", \
          "url"      : "/web-scraping-imdb-with-r/", \
          "date"     : "March 29, 2019" \
        }, \
       \
        { \
          "title"    : "Analysing my reading habits from Goodreads data", \
          "category" : "data science", \
          "url"      : "/tableau-visualisation-goodreads/", \
          "date"     : "October 21, 2018" \
        }, \
       \
        { \
          "title"    : "A preliminary exploration of the semantics of Romanian psych-verbs", \
          "category" : "linguisticsdata scienceconferences", \
          "url"      : "/poster-linguistik-meetup-potsdam/", \
          "date"     : "August  4, 2018" \
        }, \
       \
        { \
          "title"    : "Autism as figure of speech in Austrian newspapers (a critical discourse analysis)", \
          "category" : "linguisticsconferences", \
          "url"      : "/ulab-conference-edinburgh/", \
          "date"     : "April 11, 2018" \
        }, \
       \
        { \
          "title"    : "Learnings from the 11th Meeting of Patholinguistics in Potsdam", \
          "category" : "linguisticsconferences", \
          "url"      : "/patholinguistics-conference-potsdam/", \
          "date"     : "November 20, 2017" \
        }, \
       \
        { \
          "title"    : "Expolingua Berlin", \
          "category" : "linguisticsconferences", \
          "url"      : "/expolingua-berlin/", \
          "date"     : "November 17, 2017" \
        }, \
       \
        { \
          "title"    : "What&#39;s going on in the brain of a conference interpreter?", \
          "category" : "linguisticsconferences", \
          "url"      : "/conference-student-research-berlin/", \
          "date"     : "September 22, 2017" \
        }, \
       \
        { \
          "title"    : "The effects of anesthesia on language", \
          "category" : "linguistics", \
          "url"      : "/effects-of-anesthesia-on-language/", \
          "date"     : "September 11, 2017" \
        }, \
       \
        { \
          "title"    : "The impairment of concrete and abstract words in semantic dementia", \
          "category" : "linguisticsconferences", \
          "url"      : "/linguistik-meetup-berlin/", \
          "date"     : "August  4, 2017" \
        }, \
       \
        { \
          "title"    : "A statistical evaluation of sportiness level across age groups", \
          "category" : "spssstats", \
          "url"      : "/stats-spss-part3/", \
          "date"     : "July 21, 2017" \
        }, \
       \
        { \
          "title"    : "How does the mental lexicon differ between healthy aging individuals and patients with semantic dementia?", \
          "category" : "linguistics", \
          "url"      : "/mental-lexicon-differences/", \
          "date"     : "April 20, 2017" \
        }, \
       \
        { \
          "title"    : "Xenolinguistics by D.R. Slattery", \
          "category" : "linguisticsbooksreviews", \
          "url"      : "/xenolinguistics-book-review/", \
          "date"     : "December 21, 2016" \
        }, \
       \
        { \
          "title"    : "A year of research findings about bilingualism", \
          "category" : "linguistics", \
          "url"      : "/bilingualism-research-2016/", \
          "date"     : "December 21, 2016" \
        }, \
       \
        { \
          "title"    : "Conference - Languages of trauma in visual media", \
          "category" : "linguisticsconferences", \
          "url"      : "/conference-languages-of-trauma/", \
          "date"     : "November 28, 2016" \
        }, \
       \
        { \
          "title"    : "Learnings from the 10th Meeting of Patholinguistics in Potsdam", \
          "category" : "linguisticsconferences", \
          "url"      : "/patholinguistics-meeting-potsdam/", \
          "date"     : "November 23, 2016" \
        }, \
       \
        { \
          "title"    : "Tales on Blindness by Cláudia Alves", \
          "category" : "film", \
          "url"      : "/film-review-tales-on-blindness/", \
          "date"     : "July  1, 2015" \
        }, \
       \
        { \
          "title"    : "Plaidoyer pour l’écriture manuscrite", \
          "category" : "francaislinguisticswriting", \
          "url"      : "/plaidoyer-pour-ecriture-manuscrite/", \
          "date"     : "May 20, 2015" \
        }, \
       \
        { \
          "title"    : "Die sechste Jahreszeit von Jan Soldat", \
          "category" : "filmdeutsch", \
          "url"      : "/filmkritik-jan-soldat/", \
          "date"     : "April 27, 2015" \
        }, \
       \
        { \
          "title"    : "La vision des États-Unis d’Europe chez Victor Hugo", \
          "category" : "francais", \
          "url"      : "/vision-europe-victorhugo/", \
          "date"     : "July 14, 2014" \
        }, \
       \
        { \
          "title"    : "Alexander Rodchenko @ Westlicht Wien", \
          "category" : "photographyfrancaisdeutsch", \
          "url"      : "/alexander-rodchenko-westlicht/", \
          "date"     : "October 30, 2013" \
        }, \
       \
        { \
          "title"    : "Linda McCartney @ Kunsthaus Wien", \
          "category" : "photographyfrancaisdeutsch", \
          "url"      : "/linda-mccartney-kunsthaus/", \
          "date"     : "July 26, 2013" \
        }, \
       \
        { \
          "title"    : "Photo and camera auction @ Westlicht Wien", \
          "category" : "francaisphotography", \
          "url"      : "/foto-auktion-westlicht-wien/", \
          "date"     : "May 30, 2013" \
        }, \
       \
        { \
          "title"    : "An evening with Ulrich Seidl in Vienna", \
          "category" : "filmfrancais", \
          "url"      : "/ulrich-seidl-interview/", \
          "date"     : "May 25, 2013" \
        }, \
       \
       \
        { \
          "title"    : "ABOUT", \
          "category" : "page", \
          "url"      : "/about/", \
          "date"     : "January 1 1970" \
        }, \
       \
        { \
          "title"    : "BLOG", \
          "category" : "page", \
          "url"      : "/blog/", \
          "date"     : "January 1 1970" \
        }, \
       \
        { \
          "title"    : "", \
          "category" : "page", \
          "url"      : "/", \
          "date"     : "January 1 1970" \
        }, \
       \
        { \
          "title"    : "ARCHIVE", \
          "category" : "page", \
          "url"      : "/tags/", \
          "date"     : "January 1 1970" \
        } \
       \
    ]';
    searchjson = JSON.parse(searchjson);

    var sjs = SimpleJekyllSearch({
      searchInput: document.getElementById('nav-search-input'),
      resultsContainer: document.getElementById('search-results-container'),
      json: searchjson
    });
  </script>
</div>



  <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Building a dockerized ETL pipeline for tweet streaming in Slack</h1>
          

          
            <span class="post-meta">Posted on 14 November 2020</span>
            
            
              <!--- "ReadTime on GitHub Jekyll" (c) 2020 Ruby Griffith Ramirez, MIT License -->






  
  <span class="post-meta"><span class="d-none d-md-inline middot">&middot;</span> 6 minute read</span>


            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class=" col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 ">

      
        
        
        

        <div id="header-gh-btns">
          
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=lorenanda&repo=tweets-docker-pipeline&type=star&count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=lorenanda&repo=tweets-docker-pipeline&type=fork&count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=lorenanda&type=follow&count=true" frameborder="0" scrolling="0" width="220px" height="20px"></iframe>
              
            
          
        </div>
      

      

      <article role="main" class="blog-post">
        <blockquote>
  <p>Project completed in week 7 (09.11.-13.11.20) of the Data Science Bootcamp at Spiced Academy in Berlin.</p>
</blockquote>

<p>This week’s project was the most complex and difficult so far. The <strong>challenge</strong> was to create a database of tweets, along with their sentiment score, and post positive tweets in a Slack channel. This pipeline had to be orchestrated with <a href="https://docs.docker.com/compose/">Docker Compose</a>. Here’s my quick and messy hand-drawn schema of the pipeline:</p>

<figure><img src="https://lorenaciutacu.files.wordpress.com/2020/11/20201113_1724016109705519843710741-e1605456158415.jpg?w=1024" alt="" style="width:100%" />Schema of the ETL pipeline</figure>

<p>In this post, I’ll show you how I set up each step.</p>

<table>
  <tbody>
    <tr>
      <td><strong>Note</strong> that the purpose of this project was mainly educational, giving the bootcamp students the opportunity to learn and work with different tools. There are probably more efficient ways of achieving the same result (for example, using only one database).</td>
    </tr>
  </tbody>
</table>

<h4 id="table-of-contents">Table of contents</h4>
<p><a href="#0-prerequisites--tech-stack">0. Prerequisites &amp; tech stack</a><br />
<a href="#1-collecting-tweets">1. Collecting tweets</a><br />
<a href="#2-storing-tweets-in-mongodb">2. Storing tweets in MongoDB</a><br />
<a href="#3-performing-etl-job">3. Performing ETL job</a><br />
    <a href="#31-extracting-tweets-from-mongodb">3.1. Extracting tweets from MongoDB</a><br />
    <a href="#32-transforming-tweets-with-sentiment-scores">3.2. Transforming tweets with sentiment scores</a><br />
    <a href="#33-loading-tweets-into-postgresql">3.3. Loading tweets into PostgreSQL</a><br />
<a href="#4-extracting-tweets-from-postgres">4. Extracting tweets from Postgres</a><br />
<a href="#5-posting-tweets-with-a-slackbot">5. Posting tweets with a Slackbot</a><br />
<a href="#6-creating-the-docker-compose-pipeline">6. Creating the Docker Compose pipeline</a><br />
<a href="#friday-lightning-talk">Friday Lightning Talk</a></p>

<h2 id="0-prerequisites--tech-stack">0. Prerequisites &amp; tech stack</h2>
<p>Here’s an overview of the apps, services, and libraries I used in this project:</p>

<table>
  <thead>
    <tr>
      <th>Apps &amp; Databases</th>
      <th>Python libraries</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Twitter</td>
      <td><a href="https://www.tweepy.org/"><code class="language-plaintext highlighter-rouge">tweepy</code></a> &amp; <a href="https://pypi.org/project/vaderSentiment/"><code class="language-plaintext highlighter-rouge">vader</code></a></td>
    </tr>
    <tr>
      <td>Slack</td>
      <td><a href=""><code class="language-plaintext highlighter-rouge">slackclient</code></a></td>
    </tr>
    <tr>
      <td><a href="https://account.mongodb.com/account/register">MongoDB</a></td>
      <td><a href="https://pymongo.readthedocs.io/en/stable/"><code class="language-plaintext highlighter-rouge">pymongo</code></a></td>
    </tr>
    <tr>
      <td><a href="https://www.postgresql.org/download/">PostgreSQL</a></td>
      <td><a href="https://www.psycopg.org/docs/install.html"><code class="language-plaintext highlighter-rouge">psycopg2-binary</code></a> &amp; <a href="https://www.sqlalchemy.org/"><code class="language-plaintext highlighter-rouge">sqlalchemy</code></a></td>
    </tr>
    <tr>
      <td><a href="https://docs.docker.com/compose/">Docker-Compose</a></td>
      <td>-</td>
    </tr>
  </tbody>
</table>

<h2 id="1-collecting-tweets">1. Collecting tweets</h2>
<p>To collect tweets, I used the <a href="https://developer.twitter.com/en/docs/twitter-api">Twitter API</a> along with the <code class="language-plaintext highlighter-rouge">tweepy</code> library.</p>

<p>First, I <a href="https://developer.twitter.com/en/docs/apps/overview">created an app on Twitter</a> and got my credentials (API key and Access Token). Then, I wrote the <a href="https://github.com/lorenanda/tweets-docker-pipeline/tree/main/docker-compose/tweet_collector">Python code for streaming live tweets</a>, using <code class="language-plaintext highlighter-rouge">tweepy</code> with my Twitter credentials. I chose to stream the hashtag <em>#OnThisDay</em> (thought it would be interesting to get a daily notification of what happened years ago) and collected the tweet text and user handle.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">OAuthHandler</span><span class="p">,</span> <span class="n">Stream</span><span class="p">,</span> <span class="n">API</span>
<span class="kn">from</span> <span class="nn">tweepy.streaming</span> <span class="kn">import</span> <span class="n">StreamListener</span>
<span class="n">tweet</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'username'</span><span class="p">:</span> <span class="n">t</span><span class="p">[</span><span class="s">'user'</span><span class="p">][</span><span class="s">'screen_name'</span><span class="p">],</span>
    <span class="s">'text'</span><span class="p">:</span> <span class="n">t</span><span class="p">[</span><span class="s">'text'</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">stream_listener</span> <span class="o">=</span> <span class="n">StreamListener</span><span class="p">()</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">tweepy</span><span class="p">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">api</span><span class="p">.</span><span class="n">auth</span><span class="p">,</span> <span class="n">listener</span><span class="o">=</span><span class="n">stream_listener</span><span class="p">)</span>
<span class="n">stream</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">track</span><span class="o">=</span><span class="p">[</span><span class="s">'OnThisDay'</span><span class="p">])</span>
</code></pre></div></div>

<h2 id="2-storing-tweets-in-mongodb">2. Storing tweets in MongoDB</h2>
<p>After collecting the tweets, I had to store them in MongoDB, a non-relational (NoSQL) database that stores data in JSON-like documents. Since the tweet data is collected as key-value pairs (JSON format), MongoDB is a good way to store this information.</p>

<p>First, I had to create a MongoDB instance, set up a cluster, and create a database and a collection within it:</p>

<ol>
  <li>Create a MongoDB account</li>
  <li>Set up a cluster: <em>cloud.mongodb.com &gt; Clusters &gt; Create New Cluster</em></li>
  <li>Create a database: <em>Cluster &gt; Collections &gt; Create Database</em></li>
  <li>Create a collection: <em>Cluster &gt; Collections &gt; Database &gt; Create Collection</em></li>
  <li>Create a field: <em>Collection &gt; Insert document &gt; Type the field <code class="language-plaintext highlighter-rouge">text</code> below <code class="language-plaintext highlighter-rouge">_id</code></em></li>
  <li>Allow access to the database: <em>Project &gt; Security &gt; Network Access &gt; IP Access List &gt; Add your IP address.</em></li>
  <li>Connect to the database from your terminal:<br />
<code class="language-plaintext highlighter-rouge">mongo "mongodb+srv://YourClusterName.mongodb.net/YourDatabaseName" --username YourUsername</code></li>
</ol>

<p>Second, I wrote the <a href="https://github.com/lorenanda/tweets-docker-pipeline/tree/main/docker-compose/tweet_collector">Python code for storing tweets in MongoDB</a> using the <code class="language-plaintext highlighter-rouge">pymongo</code> library.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pymongo</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">pymongo</span><span class="p">.</span><span class="n">MongoClient</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'mongo_container'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">27018</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">tweets_db</span>

<span class="k">def</span> <span class="nf">warning_log</span><span class="p">(</span><span class="n">tweet</span><span class="p">):</span>
    <span class="n">logging</span><span class="p">.</span><span class="n">critical</span><span class="p">(</span><span class="s">'</span><span class="se">\n\n</span><span class="s">TWEET: '</span> <span class="o">+</span> <span class="n">tweet</span><span class="p">[</span><span class="s">'username'</span><span class="p">]</span> <span class="o">+</span> <span class="s">'just tweeted: '</span> <span class="o">+</span> <span class="n">tweet</span><span class="p">[</span><span class="s">'text'</span><span class="p">])</span>
    <span class="n">db</span><span class="p">.</span><span class="n">collections</span><span class="p">.</span><span class="n">onthisday</span><span class="p">.</span><span class="n">insert_one</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>
</code></pre></div></div>

<p>The host <code class="language-plaintext highlighter-rouge">mongo_container</code> is one of the Docker containers, explained in <a href="#creating-a-docker-compose-pipeline">section 5</a>.</p>

<h2 id="3-performing-etl-job">3. Performing ETL job</h2>
<p>The ETL (Extract, Transform, Load) job involves three actions: extracting tweets from MongoDB, analyzing their sentiment, and storing them into a new Postgres database. Here is the <a href="https://github.com/lorenanda/tweets-docker-pipeline/tree/main/docker-compose/etl_job">Python code for the ETL job</a>.</p>

<h3 id="31-extracting-tweets-from-mongodb">3.1. Extracting tweets from MongoDB</h3>
<p>To extract the tweet texts from MongoDB, I used again the <code class="language-plaintext highlighter-rouge">pymongo</code> library.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">extract_tweets</span><span class="p">():</span>
    <span class="n">tweets</span>  <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">onthisday</span><span class="p">.</span><span class="n">find</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">tweets</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">choice</span><span class="p">(</span><span class="n">tweets</span><span class="p">)</span>
        <span class="n">logging</span><span class="p">.</span><span class="n">critical</span><span class="p">(</span><span class="s">"Random tweet: "</span><span class="o">+</span><span class="n">t</span><span class="p">[</span><span class="s">"text"</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">t</span>
</code></pre></div></div>
<h3 id="32-transforming-tweets-with-sentiment-scores">3.2. Transforming tweets with sentiment scores</h3>
<p>To analyze the sentiment of the tweets, I used the <code class="language-plaintext highlighter-rouge">VADER</code> library , which returns (among others) a compound sentiment score.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">vaderSentiment.vaderSentiment</span> <span class="kn">import</span> <span class="n">SentimentIntensityAnalyzer</span>

<span class="k">def</span> <span class="nf">transform_tweets</span><span class="p">(</span><span class="n">tweet</span><span class="p">):</span>

    <span class="n">tweet_text</span> <span class="o">=</span> <span class="n">tweet</span><span class="p">[</span><span class="s">'text'</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="s">"</span><span class="se">\'</span><span class="s">"</span><span class="p">,</span><span class="s">""</span><span class="p">)</span>

    <span class="n">sia</span> <span class="o">=</span> <span class="n">SentimentIntensityAnalyzer</span><span class="p">()</span>
    <span class="n">tweet_sia</span> <span class="o">=</span> <span class="n">sia</span><span class="p">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">tweet_text</span><span class="p">)[</span><span class="s">'compound'</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">tweet_sia</span>
</code></pre></div></div>
<h3 id="33-loading-tweets-into-postgresql">3.3. Loading tweets into PostgreSQL</h3>
<p>To load the tweets with their sentiment scores into a Postgres database, first you need––well, a Postgres database. I installed Postgres, then created a database and a table for tweets right from the terminal:</p>

<ol>
  <li>Connect to Postgres: <code class="language-plaintext highlighter-rouge">psql</code></li>
  <li>Create a database: <code class="language-plaintext highlighter-rouge">createdb twitter</code></li>
  <li>Go into the created database: <code class="language-plaintext highlighter-rouge">psql twitter</code></li>
  <li>Create columns in the database: <code class="language-plaintext highlighter-rouge">CREATE TABLE tweets (text varchar(280), score numeric(4,3);</code></li>
</ol>

<p>Then, I wrote the Python code for inserting tweets into the <code class="language-plaintext highlighter-rouge">tweets</code> table, using the <code class="language-plaintext highlighter-rouge">sqlalchemy</code> library.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">load_tweets</span><span class="p">(</span><span class="n">tweet</span><span class="p">,</span> <span class="n">sentiment</span><span class="p">):</span>

    <span class="n">insert_query</span> <span class="o">=</span> <span class="s">"""
    INSERT INTO tweets VALUES ('{tweet["text"]}', {tweet_sia});
    """</span>

    <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insert_query</span><span class="p">)</span>
    <span class="n">logging</span><span class="p">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s">'Tweet </span><span class="si">{</span><span class="n">tweet</span><span class="p">[</span><span class="s">"text"</span><span class="p">]</span><span class="si">}</span><span class="s"> loaded into Postgres.'</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="4-extracting-tweets-from-postgres">4. Extracting tweets from Postgres</h2>
<p>After having a database of tweets and their sentiment score in place, I had to select and extract <em>some</em> tweets, that would be sent to Slack.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">query</span> <span class="o">=</span> <span class="n">pg</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s">"SELECT text FROM tweets ORDER BY sentiment DESC LIMIT 1"</span><span class="p">)</span>
<span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="p">))</span>
<span class="n">output</span> <span class="o">=</span> <span class="sa">f</span><span class="s">'NEW TWEET! </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s"> just tweeted: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s"> </span><span class="se">\n</span><span class="s">Sentiment score: </span><span class="si">{</span><span class="n">blob_score</span><span class="si">}</span><span class="s">'</span>
</code></pre></div></div>

<h2 id="5-posting-tweets-with-a-slackbot">5. Posting tweets with a Slackbot</h2>
<p>The last step in the pipeline is posting tweets in a Slack channel. To do this, first I <a href="https://slack.com/intl/en-de/help/articles/115005265703-Create-a-bot-for-your-workspace">created a Slackbot</a>.</p>

<p>Then, I wrote the Python code for posting tweets in a Slack channel, including the code from the previous step:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">slack</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">import</span> <span class="nn">config</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">config</span><span class="p">.</span><span class="n">PG_ENGINE</span>
<span class="n">webhook_url</span> <span class="o">=</span> <span class="n">config</span><span class="p">.</span><span class="n">WEBHOOK_SLACK</span>


<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">.</span><span class="n">critical</span><span class="p">(</span><span class="s">"</span><span class="se">\n\n</span><span class="s">Positive tweet:</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">pg</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s">"SELECT text FROM tweets ORDER BY sentiment DESC LIMIT 1"</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="p">))</span>
    <span class="n">logging</span><span class="p">.</span><span class="n">critical</span><span class="p">(</span><span class="n">msg</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="sa">f</span><span class="s">'NEW TWEET! </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s"> just tweeted: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s"> </span><span class="se">\n</span><span class="s">Sentiment score: </span><span class="si">{</span><span class="n">blob_score</span><span class="si">}</span><span class="s">'</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'text'</span><span class="p">:</span> <span class="n">output</span><span class="p">}</span>
    <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">webhook_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</code></pre></div></div>

<p>And :tada: –– here’s the tweet that was posted in Slack:</p>

<figure><img src="./../assets/img/tweetbyslackbot.webp" alt="" style="width:50%" />Tweet posted by Slackbot</figure>

<h2 id="6-creating-the-docker-compose-pipeline">6. Creating the Docker Compose pipeline</h2>
<p>The final touch of this project is <em>orchestration</em>. The individual Python scripts for each step work when you run them manually, but the goal is to run this pipeline from beginnning to end with only one command. This is where <strong>Docker Compose</strong> comes in.</p>

<blockquote>
  <p>Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application’s services. Then, with a single command, you create and start all the services from your configuration.</p>
</blockquote>

<p>Each of the five previous steps (or the rectangles in my messy schema) represents a <a href="https://www.docker.com/resources/what-container"><strong>Docker container</strong></a>, so in my <code class="language-plaintext highlighter-rouge">docker_compose.yml</code> file I had five containers (services): <code class="language-plaintext highlighter-rouge">tweet_container</code>, <code class="language-plaintext highlighter-rouge">postgres_container</code>, <code class="language-plaintext highlighter-rouge">mongo_container</code>, <code class="language-plaintext highlighter-rouge">etl_container</code>, and <code class="language-plaintext highlighter-rouge">slackbot_container</code>.</p>

<p>For the two database containers, I used <a href="">Docker images</a>, since they didn’t depend on custom code stored in my project folders. For the other three containers, I referefenced the respective code location (<code class="language-plaintext highlighter-rouge">build</code>) and their dependencies (<code class="language-plaintext highlighter-rouge">depends_on</code>) (for example, the <code class="language-plaintext highlighter-rouge">tweet_collector</code> depends on <code class="language-plaintext highlighter-rouge">postgres</code> and <code class="language-plaintext highlighter-rouge">mongo</code>, since the tweets are stored in these databases).</p>

<p>I also used <a href="https://docs.docker.com/storage/volumes/">Docker <code class="language-plaintext highlighter-rouge">volumes</code></a> to keep the data when the containers are stopped (data persistence).</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">tweet_container</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">tweet_collector/</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">postgres_container</span>
      <span class="pi">-</span> <span class="s">mongo_container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./tweet_collector/:/app</span>
  
  <span class="na">postgres_container</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">postgresdb</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:13.0</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">5555:5432</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">POSTGRES_USER=your_user</span>
      <span class="pi">-</span> <span class="s">POSTGRES_PASSWORD=your_password</span>

  <span class="na">mongo_container</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">mongodb</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">27018:27018</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./mongodb:/app</span>
  
  <span class="na">etl_container</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">etl_job/</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">postgres_container</span>
      <span class="pi">-</span> <span class="s">mongo_container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./etl_job/:/app</span>

  <span class="na">slackbot_container</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">slackbot/</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mongo_container</span>
      <span class="pi">-</span> <span class="s">postgres_container</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./slackbot/:/app</span>
</code></pre></div></div>

<p>Finally, here some of the CLI commands I used for managing the Docker containers (you can find more in <a href="https://docs.docker.com/engine/reference/commandline/cli/">their docs</a>):</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker images</code> to list all the used images (postgres and mongo)</li>
  <li><code class="language-plaintext highlighter-rouge">docker ps -a</code> to list all my containers</li>
  <li><code class="language-plaintext highlighter-rouge">docker -v</code> to mount volumes</li>
  <li><code class="language-plaintext highlighter-rouge">docker build</code> to build an image from a Docker file</li>
  <li><code class="language-plaintext highlighter-rouge">docker run</code> to run the containers</li>
</ul>

<p>And that was it: my very first dockerized ETL pipeline –– a week’s work and a few hours writing packed in a 6-minute blog post.</p>
<h2 id="friday-lightning-talk">Friday Lightning Talk</h2>

<p>This week I focused on the Transform part of the project, which was about Sentiment Analysis. When we learned about the VADER library, some colleagues asked how the training data is collected and who rates the training texts. To answer these questions, I decided to present one of my dearest personal projects in which I did exactly that: I created a list of emotion verbs and asked native speakers to rate their valence, arousal, and duration. You can read more about this project (and data analysis) <a href="https://github.com/lorenanda/psych-verbs">on GitHub</a> and in this <a href="/poster-linguistik-meetup-potsdam">blog post</a> from a student conference.</p>

      </article>

      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript" ></script>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#data science">data science</a>
          
            <a href="/tags#bootcamp">bootcamp</a>
          
            <a href="/tags#python">python</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Building+a+dockerized+ETL+pipeline+for+tweet+streaming+in+Slack&url=http%3A%2F%2Flocalhost%3A4000%2Fbootcamp7%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fbootcamp7%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fbootcamp7%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/bootcamp6/" data-toggle="tooltip" data-placement="top" title="Creating a Metabase dashboard on Postgres and AWS">&larr; Creating a Metabase dashboard on Postgres and AWS</a>
        </li>
        
        
        <li class="page-item next">
          <a class="page-link" href="/bootcamp8/" data-toggle="tooltip" data-placement="top" title="Creating a Markov chain Monte Carlo simulation in Python">Creating a Markov chain Monte Carlo simulation in Python &rarr;</a>
        </li>
        
      </ul>
      

    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="https://linkedin.com/in/lorena-ciutacu" title="LinkedIn">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">LinkedIn</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/lorenanda" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://gitlab.com/lciutacu" title="GitLab">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitLab</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://medium.com/@lorenaciutacu" title="Medium">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-medium fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Medium</span>
    </a>
  </li><li class="list-inline-item">
    <a href="https://dev.to/@lorena" title="DEV">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-dev fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">DEV</span>
    </a>
  </li><li class="list-inline-item">
    <a href="https://www.goodreads.com/lorenasbooks" title="Goodreads">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-goodreads fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Goodreads</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
    
      
        Lorena Ciutacu
        ©
      
      2012-2022

      

      

      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
